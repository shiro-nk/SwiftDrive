package nk.hiroshi.network;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

public class Client {
	public static void main(String[] args) {
		new Client("localhost", 3141).init();
	}
	
	Socket server;
	boolean connected = true;
	BufferedReader in;
	PrintWriter out;
	
	public Client(String host, int port) {
		try {
			server = new Socket(host, port);
			
			try {
				in  = new BufferedReader(new InputStreamReader(server.getInputStream()));
				out = new PrintWriter(server.getOutputStream(), true);
			} catch(Exception e) {
				System.exit(0);
			}
		}
		catch(Exception e) {
			System.exit(0);
		}
		
		things();
	}
	
	Scanner scan;
	public void init() {
		try {
			scan = new Scanner(System.in);
		}
		catch(Exception e) {
			System.exit(500);
		}
		
		String s;
		while((s = scan.nextLine()).equals("exit")) {
			
		}
	}
	
	public void in() {
		try {
			String s = in.readLine();
			System.out.println("Received: " + s);
		}
		catch(Exception e) {
			System.exit(0);
		}
	}
	
	public void out(String s) {
		try {
			System.out.print("Sending: " + s + "...");
			out.println(s);
			System.out.println(" Done!");
			
		}
		catch(Exception e) {
			System.exit(0);
		}
	}
	
	void things() {
		out("Hello world!");
		in();
		out("Test");
		in();
		//out("stop");
	}
}
